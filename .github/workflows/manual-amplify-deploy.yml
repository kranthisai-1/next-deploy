name: Manual Deploy From Tag (Hardcoded)

on:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: ubuntu-latest

    env:
      STAGING_WEBHOOK: "https://webhooks.amplify.us-east-1.amazonaws.com/prod/webhooks?id=491b16b6-4c4b-4690-ba80-3e4dcf40a4d4&token=HoP06RMo7z7VPwCznlDYrfSHdqBcPTCnMWgEybr9A"
      PRODUCTION_WEBHOOK: "https://webhooks.amplify.us-east-1.amazonaws.com/prod/webhooks?id=da0ac255-2976-48ec-a99b-be6397caf298&token=GD0zBA1bAAFOlD87jT3KMJik8ylM0J5Nsex3OUNIOg"

    steps:
      - name: Checkout hardcoded tag v1.0.22
        uses: actions/checkout@v4
        with:
          ref: v1.0.22

      - name: Confirm tag content
        run: |
          echo "âœ… Checked out tag: v1.0.22"
          git log -1 --oneline

      - name: Trigger Amplify Build for Tag (Hardcoded)
        run: |
          curl -X POST \
            -H "Content-Type: application/json" \
            -d '{
              "clientMetadata": {
                "version_tag": "v1.0.22"
              }
            }' \
            "https://webhooks.amplify.us-east-1.amazonaws.com/prod/webhooks?id=491b16b6-4c4b-4690-ba80-3e4dcf40a4d4&token=HoP06RMo7z7VPwCznlDYrfSHdqBcPTCnMWgEybr9A"
